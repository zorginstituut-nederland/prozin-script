/*! @patternslib/patternslib 9.7.0 */
(self.webpackChunkploneintranet_patterns=self.webpackChunkploneintranet_patterns||[]).push([[52049],{52049:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e;(e=Redactor).add("plugin","filemanager",{translations:{en:{choose:"Choose"}},init:function(t){this.app=t,this.lang=t.lang,this.opts=t.opts},onmodal:{file:{open:function(t,e){this.opts.fileManagerJson&&this._load(t)}}},_load:function(t){var a=t.getBody();this.$box=e.dom("<div>"),this.$box.attr("data-title",this.lang.get("choose")),this.$box.addClass("redactor-modal-tab"),this.$box.hide(),this.$box.css({overflow:"auto",height:"300px","line-height":1}),a.append(this.$box),e.ajax.get({url:this.opts.fileManagerJson,success:this._parse.bind(this)})},_parse:function(a){var o=e.dom('<ul id="redactor-filemanager-list">');for(var n in a){var i=a[n];if("object"===t(i)){var s=e.dom("<li>"),r=e.dom("<a>");r.attr("href","#"),r.addClass("redactor-file-manager-link"),r.attr("data-params",encodeURI(JSON.stringify(i))),r.text(i.title||i.name),r.on("click",this._insert.bind(this));var l=e.dom("<span>");l.addClass("r-file-name"),l.text(i.name),r.append(l);var p=e.dom("<span>");p.addClass("r-file-size"),p.text("("+i.size+")"),r.append(p),s.append(r),o.append(s)}}this.$box.append(o)},_insert:function(t){t.preventDefault();var a=e.dom(t.target).closest(".redactor-file-manager-link"),o=JSON.parse(decodeURI(a.attr("data-params")));this.app.api("module.file.insert",{file:o})}})}}]);
//# sourceMappingURL=52049.897beb22399d885e807e.min.js.map